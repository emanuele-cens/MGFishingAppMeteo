<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MG Fishing App</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: url('https://images.unsplash.com/photo-1502786129293-79981df4e689?auto=format&fit=crop&w=1400&q=80') no-repeat center center fixed;
      background-size: cover;
      color: #fff;
    }
    header {
      background: rgba(0, 119, 204, 0.8);
      color: white;
      padding: 1rem;
      text-align: center;
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);
    }
    #hamburger {
      position: fixed;
      top: 15px;
      left: 15px;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 10px;
      font-size: 20px;
      border-radius: 5px;
      z-index: 1001;
      cursor: pointer;
    }
    nav {
      position: fixed;
      top: 0;
      left: -250px;
      width: 220px;
      height: 100%;
      background: rgba(0, 0, 0, 0.85);
      padding-top: 60px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      transition: left 0.3s ease-in-out;
      z-index: 1000;
    }
    nav.show {
      left: 0;
    }
    nav a {
      text-decoration: none;
      padding: 0.7rem;
      background: #00aaff;
      color: white;
      border-radius: 5px;
      text-align: center;
      font-weight: bold;
      display: block;
      margin: 0 10px;
    }
    .section {
      display: none;
      padding: 1rem;
      background-color: rgba(0, 0, 0, 0.6);
      margin: 1rem;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
      animation: fadeIn 0.5s ease-in-out;
    }
    .section.active {
      display: block;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .button {
      padding: 10px;
      background: #0077cc;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 10px;
    }
    .input {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border-radius: 5px;
      border: none;
    }
  </style>
</head>
<body>
  <div id="hamburger" onclick="toggleMenu()">â˜°</div>
  <header>
  <div style="display: flex; justify-content: center; align-items: center; gap: 20px;">
    <a href="https://www.facebook.com/verde.pesca.7" target="_blank"><img src="https://upload.wikimedia.org/wikipedia/commons/5/51/Facebook_f_logo_%282019%29.svg" width="30" alt="Facebook"></a>
    <a href="https://www.instagram.com/mgfishingverdepesca/" target="_blank"><img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png" width="30" alt="Instagram"></a>
    <a href="https://www.tiktok.com/@mgfishing.verdepesca" target="_blank"><img src="https://upload.wikimedia.org/wikipedia/commons/a/a9/TikTok_logo.svg" width="30" alt="TikTok"></a>
  </div>
</header>
  <nav id="sideMenu">
    <a href="#" onclick="showSection('contattaci')">ğŸ’¬ Contattaci</a>
    <a href="#" onclick="showSection('home')">ğŸ  Home</a>
    <a href="#" onclick="showSection('meteo')">â˜€ï¸ Meteo</a>
    <a href="#" onclick="showSection('webcam')">ğŸ“· Webcam</a>
    <a href="#" onclick="showSection('licenze')">ğŸ£ Licenze</a>
    <a href="#" onclick="showSection('esche')">ğŸª± Esche Vive</a>
    <a href="#" onclick="showSection('blog')">ğŸ“ Blog</a>
    <a href="#" onclick="showSection('login')">ğŸ” Login</a>
    <a href="#" onclick="showSection('shop')">ğŸ›’ Shop</a>
  </nav>

  <main>
    <div id="meteo" class="section">
  <h2>Meteo</h2>
  <input id="cityInput" class="input" placeholder="Inserisci cittÃ ">
  <button onclick="getWeatherByCity()" class="button">Cerca</button>
  <div id="weatherDisplay"></div>
  <p>Consulta le previsioni meteo per pianificare la tua battuta di pesca. Vento, temperatura e condizioni ideali!</p>
</div>
    </div>

    <div id="webcam" class="section">
  <h2>Webcam</h2>
  <select id="localita" class="input" onchange="mostraWebcam()">
    <option value="">Scegli localitÃ </option>
    <option value="https://www.vedetta.org/webcam/italia/lazio/latina/lido-di-latina/">Latina</option>
    <option value="https://www.vedetta.org/webcam/italia/sardegna/sassari/alghero/">Alghero</option>
  </select>
  <div id="webcamFrame"></div>
  <p>Controlla in tempo reale le condizioni del mare prima di uscire a pescare.</p>
</div>
    </div>

    <div id="licenze" class="section">
  <h2>Licenze</h2>
  <ul>
    <li><strong>Lazio:</strong> Gratuita under 18, over 65. â‚¬29,13 per gli altri.</li>
    <li><strong>Lombardia:</strong> â‚¬23 - esenti under 18 e over 65.</li>
    <li><strong>Piemonte:</strong> â‚¬35 - esenti minori di 14 anni e disabili.</li>
    <li><strong>Emilia-Romagna:</strong> â‚¬22,72 - esenti under 18 e over 65.</li>
    <li><strong>Toscana:</strong> â‚¬35 - nessuna esenzione.</li>
    <li><strong>Veneto:</strong> â‚¬34 - esenti under 18, over 70 e disabili.</li>
    <li><strong>Sardegna:</strong> â‚¬20 - valida 5 anni, gratuita over 65 e under 14.</li>
    <li><strong>Liguria:</strong> â‚¬45,45 - ridotta per over 65.</li>
  </ul>
</div>

    <div id="esche" class="section">
  <h2>Esche Vive</h2>
  <form id="escheForm">
    <label>Arenicola Locale<br><small>Ottima per orate e spigole.</small><input type="number" name="Arenicola Locale" class="input"></label>
    <label>Americano<br><small>Esca resistente ideale per mare mosso.</small><input type="number" name="Americano" class="input"></label>
    <label>Bibi<br><small>Prediletto dalle orate. Da innescare con ago.</small><input type="number" name="Bibi" class="input"></label>
    <label>Cordella<br><small>Profumata, perfetta per la pesca notturna.</small><input type="number" name="Cordella" class="input"></label>
    <label>Muriddu<br><small>Esca locale per mormore e saraghi.</small><input type="number" name="Muriddu" class="input"></label>
    <label>Bigattino<br><small>Ottimo per acque dolci e marine.</small><input type="number" name="Bigattino" class="input"></label>
    <label>Vermi di Terra<br><small>Esca multiuso per cefali e anguille.</small><input type="number" name="Vermi di Terra" class="input"></label>
    <label>Camole del Miele<br><small>Ideale per la pesca alla trota.</small><input type="number" name="Camole del Miele" class="input"></label>
    <button type="button" class="button" onclick="inviaOrdineEsche()">ğŸ“² Prenota via WhatsApp</button>
  </form>
</div>
    <div id="blog" class="section">
    <h2>Blog</h2>
    <article>
      <h3>7 nodi da pesca indispensabili</h3>
      <ul>
        <li>Palomar â€“ ideale per treccia</li>
        <li>Clinch â€“ nodo classico</li>
        <li>Uni to Uni â€“ per unire due fili</li>
        <li>Asola â€“ per montaggi scorrevoli</li>
      </ul>
      <p><a href="https://www.youtube.com/watch?v=QJx1GYjoSQU" target="_blank">Guarda il video tutorial</a></p>
    </article>
    <article>
      <h3>Come leggere il mare</h3>
      <p>Onde, schiume e fondali rivelano dove cercare i pesci. Le zone calme indicano buoni spot.</p>
    </article>
  </div>

  <div id="login" class="section">
    <h2>Login</h2>
    <input type="email" class="input" placeholder="Email">
    <input type="password" class="input" placeholder="Password">
    <button class="button">Accedi</button>
  </div>
  <div id="shop" class="section">
    <h2>Visita il nostro shop online</h2>
    <p>Scopri tutte le offerte e le novitÃ  sul nostro sito ufficiale.</p>
    <a href="https://www.mgfishing.eu" target="_blank" class="button">ğŸŒ Vai a MG Fishing</a>
  </div>
  <div id="contatti" class="section">
    <h2>Contatti</h2>
    <p>ğŸ“ Telefono: <a href="tel:3408198180" style="color: #fff;">340 8198180</a></p>
    <p>ğŸ“ Telefono: <a href="tel:3494166335" style="color: #fff;">349 4166335</a></p>
    <p>ğŸ“§ Email: <a href="mailto:info@mgfishing.eu" style="color: #fff;">info@mgfishing.eu</a></p>
    <p>ğŸª Vieni a trovarci sul nostro sito ufficiale: <a href="https://www.mgfishing.eu" target="_blank" style="color: #00aaff;">www.mgfishing.eu</a></p>
  </div>

  <div id="home" class="section active">
    <h2>Benvenuto su MG Fishing</h2>
    <p>Scopri tutte le funzionalitÃ  e i servizi dedicati ai pescatori!</p>
  </div>
  <div id="contattaci" class="section">
    <h2>Contatto WhatsApp</h2>
    <p>Hai bisogno di assistenza o vuoi prenotare direttamente? Contattaci subito!</p>
    <a href="https://wa.me/393494166335" target="_blank" style="background: #25D366; color: white; padding: 15px 20px; border-radius: 50px; text-decoration: none; font-weight: bold; display: inline-block;">ğŸ’¬ Scrivici su WhatsApp</a>
  </div>
</main>

  <script>
    function showSection(id) {
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  const menu = document.getElementById("sideMenu");
  if (menu.classList.contains("show")) {
    menu.classList.remove("show");
  }
}

    function mostraWebcam() {
      const url = document.getElementById("localita").value;
      document.getElementById("webcamFrame").innerHTML = url ? `<iframe src="${url}" width="100%" height="400"></iframe>` : "";
    }

    function inviaOrdineEsche() {
      const form = document.getElementById("escheForm");
      const dati = new FormData(form);
      let messaggio = "Prenotazione esche:%0A";
      for (const [nome, quantita] of dati.entries()) {
        if (quantita) messaggio += `${nome}: ${quantita}%0A`;
      }
      const link = `https://wa.me/393494166335?text=${messaggio}`;
      window.open(link, '_blank');
    }

    function getWeatherByCity() {
      const city = document.getElementById("cityInput").value;
      if (!city) return;
      fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=a3b6ead62ce9e333256276f96865a8e1&units=metric&lang=it`)
        .then(res => res.json())
        .then(data => {
          const icon = `https://openweathermap.org/img/wn/${data.weather[0].icon}@2x.png`;
          document.getElementById("weatherDisplay").innerHTML = `
            <h3>${data.name}</h3>
            <img src="${icon}" alt="meteo">
            <p>Temp: ${data.main.temp}Â°C</p>
            <p>Vento: ${data.wind.speed} km/h</p>`;
        });
    }
  function toggleMenu() {
  const menu = document.getElementById("sideMenu");
  if (menu.classList.contains("show")) {
    menu.classList.remove("show");
  } else {
    menu.classList.add("show");
  }
}

function goHome() {
  showSection('home');
}

function goBack() {
  history.back();
}

async function getWeatherByCity() {
  const city = document.getElementById("cityInput").value;
  if (!city) return;

  try {
    const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=a3b6ead62ce9e333256276f96865a8e1&units=metric&lang=it`);
    const data = await response.json();

    const sunrise = new Date(data.sys.sunrise * 1000).toLocaleTimeString('it-IT');
    const sunset = new Date(data.sys.sunset * 1000).toLocaleTimeString('it-IT');
    const icon = `https://openweathermap.org/img/wn/${data.weather[0].icon}@2x.png`;

    const consigli = data.wind.speed > 25 || data.weather[0].main === 'Rain'
      ? "ğŸŒ§ï¸ Meglio rimandare la battuta di pesca."
      : data.wind.speed < 10 && data.clouds.all < 50
        ? "â˜€ï¸ Ottimo momento per pescare!"
        : "âš ï¸ Controlla bene le condizioni in zona.";

    // API fase lunare + maree simulata (sarebbe da integrare con API reali esterne tipo weatherapi o tides)
    const now = new Date();
    const dayOfMonth = now.getDate();
    const phaseIndex = dayOfMonth % 8;
    const fasiLunari = ["ğŸŒ‘ Nuova", "ğŸŒ’ Crescente", "ğŸŒ“ Primo Quarto", "ğŸŒ” Gibbosa Crescente", "ğŸŒ• Piena", "ğŸŒ– Gibbosa Calante", "ğŸŒ— Ultimo Quarto", "ğŸŒ˜ Calante"];
    const faseLunare = fasiLunari[phaseIndex];

    const mareeSimulate = ["Alta alle 06:30, Bassa alle 12:45", "Bassa alle 07:10, Alta alle 13:20"];
    const maree = mareeSimulate[dayOfMonth % 2];

    document.getElementById("weatherDisplay").innerHTML = `
      <div style="text-align: center;">
        <h3>${data.name}</h3>
        <img src="${icon}" alt="meteo">
        <p><strong>ğŸŒ¡ï¸ Temperatura:</strong> ${data.main.temp}Â°C</p>
        <p><strong>ğŸ§­ Vento:</strong> ${data.wind.speed} km/h</p>
        <p><strong>ğŸ”½ Pressione:</strong> ${data.main.pressure} hPa</p>
        <p><strong>ğŸŒ… Alba:</strong> ${sunrise} | <strong>ğŸŒ‡ Tramonto:</strong> ${sunset}</p>
        <p><strong>ğŸŒŠ Maree:</strong> ${maree}</p>
        <p><strong>ğŸŒ• Fase Lunare:</strong> ${faseLunare}</p>
        <p><strong>ğŸ£ Consiglio pesca:</strong> ${consigli}</p>
      </div>`;
  } catch (err) {
    console.error("Errore nel caricamento meteo:", err);
    document.getElementById("weatherDisplay").innerText = "Errore nel caricamento dei dati meteo.";
  }
}

function displayWeather(data) {
  if (!data || !data.main) {
    document.getElementById("weatherDisplay").innerHTML = "Dati meteo non disponibili.";
    return;
  }

  const icon = `https://openweathermap.org/img/wn/${data.weather[0].icon}@2x.png`;
  const sunrise = new Date(data.sys.sunrise * 1000).toLocaleTimeString("it-IT");
  const sunset = new Date(data.sys.sunset * 1000).toLocaleTimeString("it-IT");
  const windSpeed = data.wind.speed;
  const pressure = data.main.pressure;
  const temp = data.main.temp;
  const clouds = data.clouds.all;

  let onda = "ğŸŒŠ Mare calmo (~0.3 m)";
  if (windSpeed > 20) onda = "ğŸŒŠ Onde alte (~1.5 m)";
  else if (windSpeed > 10) onda = "ğŸŒŠ Onde moderate (~1 m)";

  let consigli = "ğŸ£ Ottime condizioni per pescare.";
  if (windSpeed > 25 || data.weather[0].main === "Rain") {
    consigli = "âš ï¸ Meglio evitare: vento forte o pioggia.";
  } else if (clouds > 70) {
    consigli = "ğŸŒ¥ï¸ Buone condizioni ma cielo molto nuvoloso.";
  }

  fetch('https://api.farmsense.net/v1/moonphases/?d=' + Math.floor(Date.now() / 1000))
    .then(res => res.json())
    .then(moon => {
      const fase = moon[0].Phase;
      document.getElementById("weatherDisplay").innerHTML = `
        <div style="text-align: center;">
          <h3>${data.name}</h3>
          <img src="${icon}" alt="Meteo">
          <p><strong>Temperatura:</strong> ${temp} Â°C</p>
          <p><strong>Vento:</strong> ${windSpeed} km/h</p>
          <p><strong>Pressione:</strong> ${pressure} hPa</p>
          <p><strong>Copertura nuvolosa:</strong> ${clouds}%</p>
          <p><strong>Alba:</strong> ${sunrise} | <strong>Tramonto:</strong> ${sunset}</p>
          <p><strong>${onda}</strong></p>
          <p><strong>Fase lunare:</strong> ${fase}</p>
          <p><strong>Consiglio pesca:</strong> ${consigli}</p>
        </div>`;
    });
}

</script>
  <div id="bottomNav" style="position: fixed; bottom: 0; left: 0; width: 100%; background: rgba(0, 0, 0, 0.8); display: flex; justify-content: space-around; padding: 10px; z-index: 999;">
    <button onclick="goHome()" style="padding: 10px 20px; background: #00aaff; color: white; border: none; border-radius: 8px; font-size: 16px;">ğŸ  Home</button>
    <button onclick="goBack()" style="padding: 10px 20px; background: #0077cc; color: white; border: none; border-radius: 8px; font-size: 16px;">ğŸ”™ Indietro</button>
  </div>

</body>
</html>
