<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MG Fishing App</title>

  <!-- Librerie necessarie per il viewer 360Â° -->
  <link rel="stylesheet" href="https://unpkg.com/photo-sphere-viewer@5.3.4/dist/photo-sphere-viewer.css">
  <script src="https://unpkg.com/uevent@2/browser.min.js"></script>
  <script src="https://unpkg.com/three@0.152.2/build/three.min.js"></script>
  <script src="https://unpkg.com/photo-sphere-viewer@5.3.4/dist/photo-sphere-viewer.js"></script>
  <script src="https://unpkg.com/photo-sphere-viewer@5.3.4/dist/plugins/markers.js"></script>

  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #000;
      color: white;
    }
    .section {
      padding: 2rem;
    }
    #viewer {
      width: 100%;
      height: 80vh;
      border-radius: 12px;
      overflow: hidden;
    }
  </style>
</head>
<body>
  <section class="section">
    <h2>ðŸ›’ Negozio Virtuale a 360Â°</h2>
    <div id="viewer"></div>
  </section>

  <script>
    window.addEventListener('load', () => {
      const viewer = new PhotoSphereViewer.Viewer({
        container: document.getElementById('viewer'),
        panorama: 'demo-shop.jpg',
        defaultLong: Math.PI,
        navbar: ['zoom', 'fullscreen'],
        plugins: [[PhotoSphereViewer.MarkersPlugin, {}]]
      });

      const markersPlugin = viewer.getPlugin(PhotoSphereViewer.MarkersPlugin);

      markersPlugin.addMarkers([
        {
          id: 'kolpo',
          longitude: -Math.PI / 4,
          latitude: 0.1,
          image: 'https://img.icons8.com/ios-filled/50/000000/fishing.png',
          width: 32,
          height: 32,
          anchor: 'bottom center',
          tooltip: 'Kolpo Long Surf - â‚¬89,90',
          data: {
            link: 'https://wa.me/393494166335?text=Vorrei%20info%20sulla%20Kolpo%20Long%20Surf'
          }
        },
        {
          id: 'daiwa',
          longitude: 0,
          latitude: 0.2,
          image: 'https://img.icons8.com/ios-filled/50/000000/fishing.png',
          width: 32,
          height: 32,
          anchor: 'bottom center',
          tooltip: 'Daiwa GT 5000 - â‚¬79,00',
          data: { link: '#' }
        },
        {
          id: 'decoy',
          longitude: Math.PI / 4,
          latitude: -0.2,
          image: 'https://img.icons8.com/ios-filled/50/000000/fishing.png',
          width: 32,
          height: 32,
          anchor: 'bottom center',
          tooltip: 'Ami Decoy JS-3 - â‚¬5,90',
          data: {
            link: 'https://wa.me/393494166335?text=Vorrei%20info%20sugli%20ami%20Decoy%20JS-3'
          }
        }
      ]);

      viewer.on('select-marker', (e) => {
        const url = e.marker.data.link;
        if (url && url !== '#') window.open(url, '_blank');
      });
    });
  </script>
</body>
</html>
