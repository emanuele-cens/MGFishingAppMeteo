<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MG Fishing App</title>
  <style>
    body { margin: 0; font-family: Arial, sans-serif; background: #f0f8ff; color: #333; }
    header { background: #0077cc; color: white; padding: 1rem; text-align: center; }
    nav { background: #eee; padding: 1rem; display: flex; flex-direction: column; gap: 10px; }
    nav a { text-decoration: none; padding: 0.5rem; background: #00aaff; color: white; border-radius: 5px; text-align: center; }
    .section { display: none; padding: 1rem; }
    .section.active { display: block; }
    .button { padding: 10px; background: #0077cc; color: white; border: none; border-radius: 5px; cursor: pointer; }
    .input { width: 100%; padding: 10px; margin: 10px 0; }
    @media (min-width: 768px) {
      nav { flex-direction: row; justify-content: center; }
    }
  </style>
</head>
<body>
  <header>
    <h1>MG Fishing App</h1>
  </header>
  <nav>
    <a href="#" onclick="showSection('meteo')">Meteo</a>
    <a href="#" onclick="showSection('webcam')">Webcam</a>
    <a href="#" onclick="showSection('licenze')">Licenze</a>
    <a href="#" onclick="showSection('esche')">Esche Vive</a>
  </nav>

  <main>
    <div id="meteo" class="section">
  <h2>Meteo</h2>
  <input id="cityInput" class="input" placeholder="Inserisci cittÃ ">
  <button onclick="getWeatherByCity()" class="button">Cerca</button>
  <div id="weatherDisplay"></div>
  <p>Consulta le previsioni meteo per pianificare la tua battuta di pesca. Vento, temperatura e condizioni ideali!</p>
</div>
    </div>

    <div id="webcam" class="section">
  <h2>Webcam</h2>
  <select id="localita" class="input" onchange="mostraWebcam()">
    <option value="">Scegli localitÃ </option>
    <option value="https://www.vedetta.org/webcam/italia/lazio/latina/lido-di-latina/">Latina</option>
    <option value="https://www.vedetta.org/webcam/italia/sardegna/sassari/alghero/">Alghero</option>
  </select>
  <div id="webcamFrame"></div>
  <p>Controlla in tempo reale le condizioni del mare prima di uscire a pescare.</p>
</div>
    </div>

    <div id="licenze" class="section">
  <h2>Licenze</h2>
  <ul>
    <li><strong>Lazio:</strong> Gratuita under 18, over 65. â‚¬29,13 per gli altri.</li>
    <li><strong>Lombardia:</strong> â‚¬23 - esenti under 18 e over 65.</li>
    <li><strong>Piemonte:</strong> â‚¬35 - esenti minori di 14 anni e disabili.</li>
    <li><strong>Emilia-Romagna:</strong> â‚¬22,72 - esenti under 18 e over 65.</li>
    <li><strong>Toscana:</strong> â‚¬35 - nessuna esenzione.</li>
    <li><strong>Veneto:</strong> â‚¬34 - esenti under 18, over 70 e disabili.</li>
    <li><strong>Sardegna:</strong> â‚¬20 - valida 5 anni, gratuita over 65 e under 14.</li>
    <li><strong>Liguria:</strong> â‚¬45,45 - ridotta per over 65.</li>
  </ul>
</div>

    <div id="esche" class="section">
  <h2>Esche Vive</h2>
  <form id="escheForm">
    <label>Arenicola Locale<br><small>Ottima per orate e spigole.</small><input type="number" name="Arenicola Locale" class="input"></label>
    <label>Americano<br><small>Esca resistente ideale per mare mosso.</small><input type="number" name="Americano" class="input"></label>
    <label>Bibi<br><small>Prediletto dalle orate. Da innescare con ago.</small><input type="number" name="Bibi" class="input"></label>
    <label>Cordella<br><small>Profumata, perfetta per la pesca notturna.</small><input type="number" name="Cordella" class="input"></label>
    <label>Muriddu<br><small>Esca locale per mormore e saraghi.</small><input type="number" name="Muriddu" class="input"></label>
    <label>Bigattino<br><small>Ottimo per acque dolci e marine.</small><input type="number" name="Bigattino" class="input"></label>
    <label>Vermi di Terra<br><small>Esca multiuso per cefali e anguille.</small><input type="number" name="Vermi di Terra" class="input"></label>
    <label>Camole del Miele<br><small>Ideale per la pesca alla trota.</small><input type="number" name="Camole del Miele" class="input"></label>
    <button type="button" class="button" onclick="inviaOrdineEsche()">ðŸ“² Prenota via WhatsApp</button>
  </form>
</div>
  </main>

  <script>
    function showSection(id) {
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }

    function mostraWebcam() {
      const url = document.getElementById("localita").value;
      document.getElementById("webcamFrame").innerHTML = url ? `<iframe src="${url}" width="100%" height="400"></iframe>` : "";
    }

    function inviaOrdineEsche() {
      const form = document.getElementById("escheForm");
      const dati = new FormData(form);
      let messaggio = "Prenotazione esche:%0A";
      for (const [nome, quantita] of dati.entries()) {
        if (quantita) messaggio += `${nome}: ${quantita}%0A`;
      }
      const link = `https://wa.me/393494166335?text=${messaggio}`;
      window.open(link, '_blank');
    }

    function getWeatherByCity() {
      const city = document.getElementById("cityInput").value;
      if (!city) return;
      fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=a3b6ead62ce9e333256276f96865a8e1&units=metric&lang=it`)
        .then(res => res.json())
        .then(data => {
          const icon = `https://openweathermap.org/img/wn/${data.weather[0].icon}@2x.png`;
          document.getElementById("weatherDisplay").innerHTML = `
            <h3>${data.name}</h3>
            <img src="${icon}" alt="meteo">
            <p>Temp: ${data.main.temp}Â°C</p>
            <p>Vento: ${data.wind.speed} km/h</p>`;
        });
    }
  </script>
</body>
</html>
